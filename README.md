
# 📊 VirtualCurrencyAnalysisBot - GPTで仮想通貨ショート分析Bot

**OKXのUSDT-SWAP銘柄から、RSI高騰コインを抽出し、GPT-4でショート分析 → 有望な銘柄のみTelegramへ画像付き通知。Renderで無料自動実行可能。**

---

## ✅ 主な特徴

| 機能                    | 内容                                                                 |
|------------------------|----------------------------------------------------------------------|
| 📈 データ取得           | OKXの全USDT-SWAP銘柄の15分足データを取得                              |
| 🔍 RSIフィルタ           | RSI > 70 の銘柄のみをGPT分析候補とする                                 |
| 🧠 GPT分析              | RSIが高い上位3件に対しGPT-4でショート判断とTP/SL/勝率を分析             |
| 📉 通知条件             | 「利益が出る確率 80%以上」の銘柄のみ、チャート画像付きでTelegram通知     |
| 🔁 通知制限             | 同一銘柄はその日1回のみ通知（重複分析を防止）                            |
| 🕒 スケジューリング対応  | 例：毎日 20:30～23:30 の間、10分おきに実行（RenderのCronで設定）         |
| 💸 コスト対策           | GPT使用数を抑え、OpenAI無料枠（月300万トークン）の**約25%以下で運用可**     |

---

## 📁 ファイル構成

```
.
├── main.py                 # メインスクリプト
├── notified_today.json     # 通知済みの銘柄記録（自動生成）
├── requirements.txt        # 必要ライブラリ
└── README.md               # 本ファイル
```

---

## 🔐 必要な環境変数（`.env` 相当）

RenderやReplit等では、以下の環境変数を登録してください：

```
OPENAI_API_KEY=sk-xxxxx...
TELEGRAM_BOT_TOKEN=123456:ABC-def...
TELEGRAM_CHAT_ID=123456789
```

---

## ⚙️ ライブラリ要件（`requirements.txt`）

```txt
openai>=1.3.9
requests>=2.31.0
pandas>=2.2.2
matplotlib>=3.8.4
python-telegram-bot==13.15
```

---

## 🚀 実行方法（Render使用例）

1. [Render](https://render.com/) にログインし、「New Web Service」を選択  
2. GitHubと連携 → このリポジトリを選択  
3. ビルド設定：
   - **Language:** Python 3.10
   - **Start command:** `python main.py`
   - **環境変数:** `.env`の内容をRenderの「Environment」タブに設定  
4. 「Advanced」> スケジューリングで `cron` を設定（例：`*/10 11-14 * * *` → JST 20:00〜23:00）

---

## ✅ GPTコストと実行頻度の目安

| 項目                        | 数値目安                        |
|---------------------------|-------------------------------|
| GPT使用件数（1日あたり）     | 最大18回（夜間のみ実行）         |
| 1回のGPT処理トークン量       | 約1,000トークン未満               |
| 月間合計トークン使用量       | 約50,000トークン前後              |
| OpenAI無料枠（月300万）比率 | **約1.5%（余裕あり）**           |

---

## 📬 通知サンプル

```
📉 ARB-USDT-SWAP ショート分析結果（OKX 15分足）

・ショートすべきか：はい  
・理由：価格が上昇しすぎており、RSIが過熱域にあるため  
・利確目安（TP）：1.08  
・損切目安（SL）：1.19  
・利益が出る確率（%）：85%
```

チャート画像も一緒にTelegramに送信されます。

---

## 👨‍🔧 今後の拡張アイデア（Issue歓迎）

- RSI以外のインジケーター対応（MACDや出来高急増など）
- ロングチャンス検出
- TradingView連携
- 利益履歴の記録・分析

---

## 🛡️ 免責事項

本Botは学習目的のサンプルであり、実際の投資判断は自己責任でお願いします。
