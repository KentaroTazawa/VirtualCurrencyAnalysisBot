# 📉 仮想通貨ショート分析Bot（Groq + OKX + Telegram）

## 🔍 概要

このBotは、仮想通貨のUSDT建て永久スワップ銘柄（例：`BTC-USDT-SWAP`）の15分足チャートを取得し、複数のテクニカル指標に基づいて「ショートで利益が出そうな銘柄」を選定・通知する自動分析ツールです。  
熟練のトレーダーの視点をGroqのLLMに委ねて判断させ、結果をTelegramに送信します。

---

## ⚙️ 主な仕様

### ✅ 分析対象銘柄
- OKXの全 `*-USDT-SWAP` 銘柄（永久スワップ）
- 毎回、100銘柄以上が自動で対象になります

---

### ✅ テクニカル指標のフィルタリング条件

以下の**全ての条件を満たす銘柄**のみをGroqによるAI判断にかけます：

| 指標 | 条件 |
|------|------|
| RSI（14期間） | 70以上（過熱感） |
| MACD | デッドクロス（直近2期間でクロス） |
| 移動平均乖離率（現在価格と25期間平均） | +5%以上（上昇しすぎ） |
| 出来高 | 直近の出来高が直前5本の平均の1.5倍以上（急増） |

---

### 🤖 GroqによるAI分析

上記フィルターを通過した銘柄に対して、Groq（`llama3-70b-8192`）を使い、以下の情報をプロンプトとして渡して分析させます：

- RSI
- MACDクロスの有無
- 移動平均乖離率
- 出来高の急増有無

#### Groq出力フォーマット（例）：

```
・ショートすべきか（はい/いいえ）：はい  
・理由：RSIが過熱水準にあり、MACDがデッドクロスしているため。  
・利確ライン（TP）：-4.5%  
・損切ライン（SL）：+1.8%  
・利益の出る確率：82%
```

---

### ✅ 通知条件

Groqの判断結果のうち、以下の条件を満たす場合にのみTelegramへ通知：

- 「利益の出る確率」が **80%以上**
- 通知済みリストに存在しない（同日中の重複通知は防止）

---

### ✅ Telegramへの通知内容

- 対象銘柄の15分足チャート（matplotlibで生成）
- Groqの分析結果（フォーマット付きテキスト）

---

### 🔁 実行タイミング

- Render上で **5分ごとに自動実行**（cronスケジューラ）
- 実行対象時間：**毎日 20:30〜0:30（JST）**

---

### 📁 ファイル構成（主要）

```
main.py              # メインのBotロジック
notified_pairs.json  # 通知済み銘柄の記録（日付別）
.env                 # APIキーなどの環境変数
requirements.txt     # 使用ライブラリ
render.yaml          # Renderスケジューラ設定
```

---

## 📌 今後の改善案（例）

- 通知内容に利確/損切ラインをチャートに表示
- 利益率・成功率のログ記録と自動学習
- TradingViewとの連携
